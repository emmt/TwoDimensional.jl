<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Affine Coordinate Transforms · TwoDimensional.jl Package</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TwoDimensional.jl Package</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../install/">Installation</a></li><li class="current"><a class="toctext" href>Affine Coordinate Transforms</a><ul class="internal"><li><a class="toctext" href="#Operations-with-affine-2D-transforms-1">Operations with affine 2D transforms</a></li><li><a class="toctext" href="#Type-conversion-1">Type conversion</a></li></ul></li><li><a class="toctext" href="../Points/">Points</a></li><li><a class="toctext" href="../BoundingBoxes/">Bounding-Boxes</a></li><li><a class="toctext" href="../reference/">Reference</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Affine Coordinate Transforms</a></li></ul><a class="edit-page" href="https://github.com/emmt/TwoDimensional.jl/blob/master/docs/src/AffineTransforms.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Affine Coordinate Transforms</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Affine-Coordinate-Transforms-1" href="#Affine-Coordinate-Transforms-1">Affine Coordinate Transforms</a></h1><p>TwoDimensional provides types and methods to deal with 2-dimensional affine coordinate transforms.</p><p>An affine 2D transform <code>C</code> is defined by 6 real coefficients, <code>Cxx</code>, <code>Cxy</code>, <code>Cx</code>, <code>Cyx</code>, <code>Cyy</code> and <code>Cy</code>.  Such a transform maps <code>(x,y)</code> as <code>(xp,yp)</code> given by:</p><pre><code class="language-julia">xp = Cxx*x + Cxy*y + Cx
yp = Cyx*x + Cyy*y + Cy</code></pre><p>The immutable type <code>AffineTransform{T}</code> is used to store an affine 2D transform with coefficients of floating-point type <code>T</code>, it can be created by:</p><pre><code class="language-julia">I = AffineTransform{T}() # yields the identity with type T
C = AffineTransform{T}(Cxx, Cxy, Cx, Cyx, Cyy, Cy)</code></pre><p>If the parameter <code>T</code> is omitted, it is guessed from the types of the coefficients.</p><h2><a class="nav-anchor" id="Operations-with-affine-2D-transforms-1" href="#Operations-with-affine-2D-transforms-1">Operations with affine 2D transforms</a></h2><p>Many operations are available to manage or apply affine transforms.</p><h3><a class="nav-anchor" id="Perform-a-coordinate-transformation-1" href="#Perform-a-coordinate-transformation-1">Perform a coordinate transformation</a></h3><p>There are several possibilities to apply an affine transform <code>A</code> to coordinates <code>(x,y)</code>:</p><pre><code class="language-julia">(xp, yp) = A(x,y)       # apply affine transform A to coordinates (x,y)
(xp, yp) = A*(x,y)      # idem
(xp, yp) = A(v)         # idem, with v = (x,y)
(xp, yp) = A*v          # idem</code></pre><p>where <code>x</code>, <code>y</code>, <code>xp</code> and <code>yp</code> are reals while <code>v = (x,y)</code> is a 2-tuple of real coordinates.  Coordinates may also be specified as <code>Point</code> instances:</p><pre><code class="language-julia">A(Point(x,y)) -&gt; Point(xp, yp)
A*Point(x,y)  -&gt; Point(xp, yp)</code></pre><h3><a class="nav-anchor" id="Reciprocal-transform-1" href="#Reciprocal-transform-1">Reciprocal transform</a></h3><p>The reciprocal transform of <code>A</code> is given by:</p><pre><code class="language-julia">B = inv(A)</code></pre><h3><a class="nav-anchor" id="Compose-coordinate-transformations-1" href="#Compose-coordinate-transformations-1">Compose coordinate transformations</a></h3><p>To compose 2 (or more) transforms <code>A</code> and <code>B</code>, do one of:</p><pre><code class="language-julia">C = compose(A, B, ...)
C = A∘B
C = A*B
C = A⋅B</code></pre><p>all these statements yields an object <code>C</code> which applies <code>B</code> then <code>A</code>.  Note that <code>∘</code> and <code>⋅</code> can be typed by <code>\\circ&lt;tab&gt;</code> and <code>\\cdot&lt;tab&gt;</code>.</p><p>Left and right divisions respectively write:</p><pre><code class="language-julia">R = A/B   # right division, same as: R = compose(A, inv(B))
L = A\B   # left division, same as: L = compose(inv(A), B)</code></pre><h3><a class="nav-anchor" id="Translation-of-coordinates-1" href="#Translation-of-coordinates-1">Translation of coordinates</a></h3><p>An operator <code>B</code> which which applies a translations by <code>(x,y)</code> <em>after</em> a coordinate transform <code>A</code> (possibly the identity) can be created by one of the following statements:</p><pre><code class="language-julia">B = translate(x, y, A)
B = translate(v, A)
B = v + A</code></pre><p>where <code>v</code> is a 2-tuple of coordinates, <em>i.e.</em> <code>v = (x,y)</code> or a <code>Point</code>, <em>i.e.</em> <code>v = Point(x,y)</code>.</p><p>To perform the translation <em>before</em> the coordinate transform <code>A</code>, do:</p><pre><code class="language-julia">B = translate(A, x, y)
B = translate(A, v)
B = A + v</code></pre><h3><a class="nav-anchor" id="Rotation-of-coordinates-1" href="#Rotation-of-coordinates-1">Rotation of coordinates</a></h3><pre><code class="language-julia">B = rotate(θ, A)   # B = apply A then rotate by angle θ
C = rotate(A, θ)   # C = rotate by angle θ then apply A</code></pre><h3><a class="nav-anchor" id="Scaling-of-coordinates-1" href="#Scaling-of-coordinates-1">Scaling of coordinates</a></h3><pre><code class="language-julia">B = scale(ρ, A)    # B = apply A then scale by ρ
B = ρ*A            # idem
C = scale(A, ρ)    # C = scale by ρ then apply A
C = A*ρ            # idem</code></pre><h3><a class="nav-anchor" id="Miscellaneous-1" href="#Miscellaneous-1">Miscellaneous</a></h3><p><code>det(A)</code> returns the determinant of the linear part of the affine transform <code>A</code>.</p><p><code>jacobian(A)</code> returns the Jacobian of the affine transform <code>A</code>, that is the absolute value of the determinant of its linear part.</p><h2><a class="nav-anchor" id="Type-conversion-1" href="#Type-conversion-1">Type conversion</a></h2><p>As a general rule, the floating-point type <code>T</code> of an <code>AffineTransform{T}</code> is imposed for all operations and for the result.  The floating-point type of the composition of several coordinate transforms is the promoted type of the transforms which have been composed.</p><p>The type of the coefficients of the affine transform <code>A</code>  is given by:</p><pre><code class="language-julia">eltype(A)</code></pre><p>To convert the floating-point type of the coefficients of <code>A</code> to be <code>T</code>, do one of:</p><pre><code class="language-julia">B = T.(A)
B = AffineTransform{T}(A)
B = convert(AffineTransform{T}, A)</code></pre><footer><hr/><a class="previous" href="../install/"><span class="direction">Previous</span><span class="title">Installation</span></a><a class="next" href="../Points/"><span class="direction">Next</span><span class="title">Points</span></a></footer></article></body></html>
